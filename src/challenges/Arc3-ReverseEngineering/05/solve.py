from z3 import *

set_option(rational_to_decimal=True)

# Create our 36 rotations as Real number types
r01 = Real('r01')
r02 = Real('r02')
r03 = Real('r03')
r04 = Real('r04')
r05 = Real('r05')
r06 = Real('r06')
r07 = Real('r07')
r08 = Real('r08')
r09 = Real('r09')
r10 = Real('r10')
r11 = Real('r11')
r12 = Real('r12')
r13 = Real('r13')
r14 = Real('r14')
r15 = Real('r15')
r16 = Real('r16')
r17 = Real('r17')
r18 = Real('r18')
r19 = Real('r19')
r20 = Real('r20')
r21 = Real('r21')
r22 = Real('r22')
r23 = Real('r23')
r24 = Real('r24')
r25 = Real('r25')
r26 = Real('r26')
r27 = Real('r27')
r28 = Real('r28')
r29 = Real('r29')
r30 = Real('r30')
r31 = Real('r31')
r32 = Real('r32')
r33 = Real('r33')
r34 = Real('r34')
r35 = Real('r35')
r36 = Real('r36')

s = Solver()

s.add(r01 > 0)
s.add(r02 > 0)
s.add(r03 > 0)
s.add(r04 > 0)
s.add(r05 > 0)
s.add(r06 > 0)
s.add(r07 > 0)
s.add(r08 > 0)
s.add(r09 > 0)
s.add(r10 > 0)
s.add(r11 > 0)
s.add(r12 > 0)
s.add(r13 > 0)
s.add(r14 > 0)
s.add(r15 > 0)
s.add(r16 > 0)
s.add(r17 > 0)
s.add(r18 > 0)
s.add(r19 > 0)
s.add(r20 > 0)
s.add(r21 > 0)
s.add(r22 > 0)
s.add(r23 > 0)
s.add(r24 > 0)
s.add(r25 > 0)
s.add(r26 > 0)
s.add(r27 > 0)
s.add(r28 > 0)
s.add(r29 > 0)
s.add(r30 > 0)
s.add(r31 > 0)
s.add(r32 > 0)
s.add(r33 > 0)
s.add(r34 > 0)
s.add(r35 > 0)
s.add(r36 > 0)

s.add(r01 + r02 == 75.4)
s.add(r03 + r04 == 92.72)
s.add(r05 + r06 == 321.58)
s.add(r07 + r08 == 123.00)
s.add(r09 + r10 == 33.33)
s.add(r11 + r12 == 267.91)
s.add(r13 + r14 == 359.99)
s.add(r15 + r16 == 80.72)
s.add(r17 + r18 == 43.87)
s.add(r19 + r20 == 89.76)
s.add(r21 + r22 == 13.37)
s.add(r23 + r24 == 180.18)
s.add(r25 + r26 == 56.32)
s.add(r27 + r28 == 80.36)
s.add(r29 + r30 == 27.11)
s.add(r31 + r32 == 184.23)
s.add(r33 + r34 == 277.32)
s.add(r35 + r36 == 312.21)

if s.check() == sat:
    m = s.model()
    rotations = sorted([(d, m[d]) for d in m], key = lambda x: str(x[0]))
    rlist = []
    for rotation in rotations:
    	print(f"{rotation[0]} = {rotation[1]}")
    	rlist.append(f"{rotation[1]}")
    print(f"python3 -c \"for x in {rlist}: print(x+'\\n')\" | ./masterlock")
else:
	print("oh-no, unsat!")
